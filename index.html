<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Elite Estates - Premium Properties in Sri Lanka</title>

    <!-- Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        primary: '#3176b1',
                        secondary: '#2b3685',
                    }
                }
            }
        }
    </script>

    <!-- Lucide Icons -->
    <script src="https://unpkg.com/lucide@latest"></script>

    <!-- Custom CSS -->
    <link rel="stylesheet" href="css/styles.css">

    <!-- Favicon -->
    <link rel="icon" type="image/png" href="public/images/favicon.png">
</head>

<body class="bg-gray-50 text-gray-900 font-sans antialiased flex flex-col min-h-screen">

    <!-- Navbar Container -->
    <div id="navbar-container"></div>

    <!-- Hero Section -->
    <div class="bg-white border-b border-gray-100">
        <div class="max-w-7xl mx-auto py-16 px-4 sm:py-24 sm:px-6 lg:px-8 text-center">
            <h1 class="text-4xl font-extrabold tracking-tight text-gray-900 sm:text-5xl md:text-6xl">
                <span class="block">Find your dream home</span>
                <span class="block text-primary">in Sri Lanka</span>
            </h1>
            <p class="mt-4 max-w-md mx-auto text-base text-gray-500 sm:text-lg md:mt-5 md:text-xl md:max-w-3xl">
                Browse our curated list of premium properties for sale and rent.
            </p>
        </div>
    </div>

    <!-- Main Content -->
    <main class="flex-grow max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 w-full">

        <!-- Filter Toggle Button (Mobile/Desktop) -->
        <!-- Property Type Selector -->
        <div class="flex justify-between items-center mb-6">
            <div class="flex bg-white p-1 rounded-xl shadow-sm border border-gray-100">
                <button id="tab-houses" onclick="switchCategory('house')"
                    class="px-6 py-2 rounded-lg text-sm font-bold transition-all bg-primary text-white shadow-md">
                    Houses & Apartments
                </button>
                <button id="tab-lands" onclick="switchCategory('land')"
                    class="px-6 py-2 rounded-lg text-sm font-bold transition-all text-gray-500 hover:text-gray-700">
                    Land
                </button>
            </div>

            <button id="toggle-filters-btn"
                class="flex items-center text-sm font-medium text-primary hover:bg-primary-50 px-4 py-2 rounded-lg transition-colors border border-primary/20">
                <i data-lucide="sliders-horizontal" class="w-4 h-4 mr-2"></i>
                <span id="filter-btn-text">Show Filters</span>
            </button>
        </div>

        <!-- Filters & Search Panel (Hidden by default to save space) -->
        <div class="bg-white p-6 rounded-xl shadow-lg mb-8 border border-gray-100 hidden transition-all duration-300"
            id="filters-container">
            <div class="grid grid-cols-1 md:grid-cols-4 gap-6">
                <!-- Search -->
                <div class="col-span-1 md:col-span-4 lg:col-span-1">
                    <label for="search" class="block text-sm font-medium text-gray-700 mb-1">Keywords</label>
                    <div class="relative">
                        <input type="text" id="search" placeholder="Search title, desc..."
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm pl-10 h-10 border px-3">
                        <div class="absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none">
                            <i data-lucide="search" class="h-4 w-4 text-gray-400"></i>
                        </div>
                    </div>
                </div>

                <!-- Filters Grid -->
                <!-- Location (Searchable Datalist) -->
                <div>
                    <label for="filter-location-input"
                        class="block text-sm font-medium text-gray-700 mb-1">Location</label>
                    <div class="relative">
                        <input list="locations-list" id="filter-location-input" placeholder="Type to search city..."
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3">
                        <datalist id="locations-list">
                            <!-- Options populated by JS -->
                        </datalist>
                        <div class="absolute inset-y-0 right-0 pr-3 flex items-center pointer-events-none">
                            <i data-lucide="map-pin" class="h-4 w-4 text-gray-400"></i>
                        </div>
                    </div>
                </div>

                <!-- Type -->
                <div>
                    <label for="filter-type" class="block text-sm font-medium text-gray-700 mb-1">Type</label>
                    <select id="filter-type"
                        class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3 bg-white">
                        <option value="any">Any Type</option>
                        <option value="sale">For Sale</option>
                        <option value="rent">For Rent</option>
                    </select>
                </div>

                <!-- Price Range (Dual Slider) -->
                <div class="col-span-1 md:col-span-1">
                    <label class="block text-sm font-medium text-gray-700 mb-2 flex justify-between">
                        <span>Price Range</span>
                        <span id="price-display"
                            class="text-primary font-bold text-xs bg-primary-50 px-2 py-0.5 rounded">Any</span>
                    </label>
                    <div class="range-slider-container">
                        <div class="slider-track"></div>
                        <input type="range" id="price-min" min="0" max="200000000" step="1000000" value="0">
                        <input type="range" id="price-max" min="0" max="200000000" step="1000000" value="200000000">
                    </div>
                </div>
            </div>

            <!-- Advanced/Secondary Filters -->
            <div class="mt-6 pt-6 border-t border-gray-100">

                <!-- HOUSE FILTERS -->
                <div id="house-filters" class="grid grid-cols-1 md:grid-cols-4 gap-6">
                    <div>
                        <label for="filter-beds" class="block text-sm font-medium text-gray-700 mb-1">Bedrooms</label>
                        <select id="filter-beds"
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3 bg-white">
                            <option value="any">Any</option>
                            <option value="1">1+</option>
                            <option value="2">2+</option>
                            <option value="3">3+</option>
                            <option value="4">4+</option>
                        </select>
                    </div>
                    <div>
                        <label for="filter-baths" class="block text-sm font-medium text-gray-700 mb-1">Bathrooms</label>
                        <select id="filter-baths"
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3 bg-white">
                            <option value="any">Any</option>
                            <option value="1">1+</option>
                            <option value="2">2+</option>
                            <option value="3">3+</option>
                        </select>
                    </div>
                    <div>
                        <label for="filter-size" class="block text-sm font-medium text-gray-700 mb-1">Min Floor Area
                            (sqft)</label>
                        <input type="number" id="filter-size" placeholder="e.g. 1000"
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3">
                    </div>
                    <div>
                        <label for="filter-condition"
                            class="block text-sm font-medium text-gray-700 mb-1">Condition</label>
                        <select id="filter-condition"
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3 bg-white">
                            <option value="any">Any Condition</option>
                            <option value="new">Brand New</option>
                            <option value="used">Used</option>
                            <option value="renovated">Renovated</option>
                        </select>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="checkbox" id="filter-parking" class="h-4 w-4 text-primary border-gray-300 rounded">
                        <label for="filter-parking" class="text-sm font-medium text-gray-700">Parking Required</label>
                    </div>
                </div>

                <!-- LAND FILTERS -->
                <div id="land-filters" class="grid grid-cols-1 md:grid-cols-4 gap-6 hidden">
                    <div>
                        <label for="filter-perches" class="block text-sm font-medium text-gray-700 mb-1">Min
                            Perches</label>
                        <input type="number" id="filter-perches" placeholder="e.g. 10"
                            class="block w-full rounded-lg border-gray-300 shadow-sm focus:border-primary focus:ring-primary sm:text-sm h-10 border px-3">
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="checkbox" id="filter-electricity"
                            class="h-4 w-4 text-primary border-gray-300 rounded">
                        <label for="filter-electricity" class="text-sm font-medium text-gray-700">Electricity
                            Required</label>
                    </div>
                    <div class="flex items-center space-x-2">
                        <input type="checkbox" id="filter-water" class="h-4 w-4 text-primary border-gray-300 rounded">
                        <label for="filter-water" class="text-sm font-medium text-gray-700">Water Supply
                            Required</label>
                    </div>
                </div>

                <div class="flex justify-end mt-6">
                    <button id="reset-filters"
                        class="bg-gray-100 text-gray-700 hover:bg-gray-200 px-6 py-2 rounded-lg text-sm font-medium transition-colors h-10 flex justify-center items-center">
                        <i data-lucide="rotate-ccw" class="w-4 h-4 mr-2"></i>
                        Reset Filters
                    </button>
                </div>
            </div>
        </div>

        <!-- Listings Grid -->
        <div id="listings-grid" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-8">
            <!-- Loading State -->
            <div class="col-span-full text-center py-12">
                <i data-lucide="loader-2" class="animate-spin h-8 w-8 text-primary mx-auto"></i>
                <p class="mt-2 text-gray-500">Loading properties...</p>
            </div>
        </div>

        <!-- Empty State (Hidden by default) -->
        <div id="no-results" class="hidden text-center py-12">
            <div class="bg-gray-100 rounded-full h-16 w-16 flex items-center justify-center mx-auto mb-4">
                <i data-lucide="search-x" class="h-8 w-8 text-gray-400"></i>
            </div>
            <h3 class="text-lg font-medium text-gray-900">No properties found</h3>
            <p class="text-gray-500 mt-1">Try adjusting your filters to see more results.</p>
        </div>

    </main>

    <!-- Footer Container -->
    <div id="footer-container"></div>

    <!-- App Scripts (Strict Order, No Module) -->
    <script src="js/config.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/properties.js"></script>
    <script src="js/components.js"></script>
    <script src="js/app.js"></script>
    <script>
        // Init happens after scripts load
        document.addEventListener('DOMContentLoaded', window.initHome);
    </script>
</body>

</html>